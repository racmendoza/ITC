<!DOCTYPE html>
<html>
  <head>
    <title>PLACEHOLDER SHOPPING CART TO PAYROLL 8:25</title>
  </head>
  <body onload="initcart()">
    <h1>Simple Shopping Cart Version #2 - Using HTML Tables to Display the Cart</h1>
    <br>
    <p>
      <a href="index.html">Back to Main Page</a>
    </p>
    <br>
    <p>
      <label for="name">Employee Name:</label>
        <input id="name" type="text" ">
      <label for="days">Days Worked:</label>
        <input id="days" type="number" ">
      <label for="rate">Daily Rate:</label>
        <input id="rate" type="number" ">
      <label for="grossPay">Gross Pay:</label>
        <input id="grossPay" type="number" readonly="">
      <label for="ddx">Deduction:</label>
        <input id="ddx" type="number" ">
      <button id="addtocart">Add to Cart</button>
    </p>
    <p>
      <label for="count">Employee Records:</label>
      <input id="count" type="number" readonly="">
      <button id="clearcart">Clear Cart</button>
      <label for="deleteCount">Delete Employee Record:</label>
      <input id="deleteCount"type="number">
      <button id="confirmDelete">Delete</button>
    </p>
    <p id="cart"></p>
  </body>
  <script>



    // Initialize cart CALLED ALSO IN BODY ONLOAD      
    function initcart(){
        cart=[];
        document.getElementById("count").value=cart.length;
        document.getElementById("cart").innerHTML="";

            
    }

    document.getElementById("days").addEventListener("keyup",()=>   
     {  
        grosspaymentcomputation();
     });

    document.getElementById("rate").addEventListener("keyup",()=>   
     {  
        grosspaymentcomputation();
     });

    document.getElementById("ddx").addEventListener("keyup",()=>   
     {  
        netpaymentcomputation();
     });
  
    // Clear Cart
     document.getElementById("clearcart").addEventListener("click",()=>   
       {
        var toclear;

        toclear=confirm("Delete all Employee(s) from Record?");

        if (toclear) {
             initcart();
         }
            
      });

    // Add item to cart
  document.getElementById("addtocart").addEventListener("click",()=>   
       {
        
         var cartno = {
             "count": "1",
             "rate": 0,
             "days": 1,
            "grossPay" : function grossPay(){
                 return Math.round(this.rate*this.days*100)/100;  
               }
            "netPay" : function netPay(){
                 return Math.round((this.grossPay-this.ddx)*100)/100;
               }
            };

          cartno.count=document.getElementById("name").value;
          cartno.days=document.getElementById("days").value;
          cartno.rate=document.getElementById("rate").value;

          console.log(cartno.count);
          console.log(cartno.days);
          console.log(cartno.rate);


           cart.push(cartno);
          //cart[cart.length]=cartno;

          console.log(cart.length);
          document.getElementById("count").value=cart.length;

          showcart();

    });

    // Compute Gross Pay per Item
    function grosspaymentcomputation() {
          var d,p,a;
          d = document.getElementById("days").value*1;
          p = document.getElementById("rate").value*1;

          a = Math.round(d*p*100)/100;  // rounds off to 2 decimal places

          console.log(a);

          document.getElementById("grossPay").value=a;
          netpaymentcomputation();
    }
    // Compute Net Pay per Item
    function netpaymentcomputation() {
          var x,y,z;
          x = document.getElementById("grossPay").value*1;
          y = document.getElementById("ddx").value*1;

          z = Math.round((x-y)*100)/100; //rounds off to 2 decimal places

          console.log(z);

          document.getElementById("netPay").value=z;
    }    
    
    // Delete item from chart
  document.getElementById("confirmDelete").addEventListener("click",()=>   
      {
    
        var todelete;
        var employeeNo;

        employeeNo=document.getElementById("deleteCount").value;

        todelete=confirm("Delete Employee No. "+employeeNo+"?");

        if (todelete) {

            cart.splice(employeeNo-1,1);
            document.getElementById("count").value=cart.length;
             showcart();   
        }

    });

    // Show the contents of the cart
    function showcart(){

        var i,l,carttext,ln;
        var theader,tbody,tb;

    
        // Generate table header;
        theader ="<thead>";
          theader+="<tr>";
            theader+="<th>No.</th>";
            theader+='<th style="text-align:center">Employee</th>';
            theader+="<th>Days Worked</th>";
            theader+='<th style="text-align:center">Rate</th>';
            theader+="<th>Gross Pay</th>";
            theader+='<th style="text-align:center">Deduction</th>';
            theader+="<th>Net Pay</th>";
          theader+="</tr>";
        theader+="</thead>";
        
        // Generate Table Body
        l = cart.length;
      
        
        for (i=0,carttext="",tbody='';i<l;i++){
            ln=i+1;    
            tbody += "<tr>"
                +'<td>'+ln+' </td>'
                +'<td>'+cart[i].count+' </td>'
                +'<td style="text-align:center">'+cart[i].days+'</td>'
                +'<td style="text-align:center">'+cart[i].rate+'</td>'
                +'<td style="text-align:center">'+cart[i].grossPay()+'</td>'
                +'<td style="text-align:center">'+cart[i].ddx()+'</td>'
                +'<td style="text-align:center">'+cart[i].netPay()+'</td>'
                +"</tr>";
        }

       console.log(theader+tbody);
        document.getElementById("cart").innerHTML=
           "<table>"+theader+tbody+"</table>";


    }
  
// Global variable
var cart = []; 


  </script>
</html>
